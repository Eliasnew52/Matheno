/*
 * ER/Studio Data Architect SQL Code Generation
 * Project :      Mazino.DM1
 *
 * Date Created : Tuesday, November 14, 2023 3:29:46 PM
 * Target DBMS : Microsoft SQL Server 2017
 */

/* 
 * TABLE: Autor 
 */

CREATE TABLE Autor(
    IdAutor      int    IDENTITY(1,1),
    IdUsuario    int    NOT NULL,
    IdQuizz      int    NOT NULL,
    CONSTRAINT PK11 PRIMARY KEY NONCLUSTERED (IdAutor)
)
go



IF OBJECT_ID('Autor') IS NOT NULL
    PRINT '<<< CREATED TABLE Autor >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Autor >>>'
go

/* 
 * TABLE: Categoria 
 */

CREATE TABLE Categoria(
    IdCategoria    int            IDENTITY(1,1),
    Categoria      varchar(20)    NULL,
    CONSTRAINT PK14 PRIMARY KEY NONCLUSTERED (IdCategoria)
)
go



IF OBJECT_ID('Categoria') IS NOT NULL
    PRINT '<<< CREATED TABLE Categoria >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Categoria >>>'
go

/* 
 * TABLE: Correctas 
 */

CREATE TABLE Correctas(
    IdCorrectas    int             IDENTITY(1,1),
    LinkAsset      varchar(200)    NULL,
    AnswerInput    varchar(30)     NOT NULL,
    IdInciso       int             NOT NULL,
    CONSTRAINT PK19 PRIMARY KEY NONCLUSTERED (IdCorrectas)
)
go



IF OBJECT_ID('Correctas') IS NOT NULL
    PRINT '<<< CREATED TABLE Correctas >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Correctas >>>'
go

/* 
 * TABLE: Dificultad 
 */

CREATE TABLE Dificultad(
    IdDificultad    int            IDENTITY(1,1),
    Dificultad      varchar(15)    NOT NULL,
    CONSTRAINT PK15 PRIMARY KEY NONCLUSTERED (IdDificultad)
)
go



IF OBJECT_ID('Dificultad') IS NOT NULL
    PRINT '<<< CREATED TABLE Dificultad >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Dificultad >>>'
go

/* 
 * TABLE: Inciso 
 */

CREATE TABLE Inciso(
    IdInciso        int             IDENTITY(1,1),
    IdTipoInciso    int             NOT NULL,
    IdQuizz         int             NOT NULL,
    LinkAsset       varchar(200)    NULL,
    Subsection      varchar(50)     NOT NULL,
    CONSTRAINT PK21 PRIMARY KEY NONCLUSTERED (IdInciso)
)
go



IF OBJECT_ID('Inciso') IS NOT NULL
    PRINT '<<< CREATED TABLE Inciso >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Inciso >>>'
go

/* 
 * TABLE: Incorrectas 
 */

CREATE TABLE Incorrectas(
    IdIncorrectas    int             IDENTITY(1,1),
    LinkAsset        varchar(200)    NULL,
    Respuesta        varchar(30)     NULL,
    IdInciso         int             NOT NULL,
    CONSTRAINT PK23 PRIMARY KEY NONCLUSTERED (IdIncorrectas)
)
go



IF OBJECT_ID('Incorrectas') IS NOT NULL
    PRINT '<<< CREATED TABLE Incorrectas >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Incorrectas >>>'
go

/* 
 * TABLE: Puntaje 
 */

CREATE TABLE Puntaje(
    IdPuntaje    int    IDENTITY(1,1),
    Puntaje      int    NULL,
    CONSTRAINT PK16 PRIMARY KEY NONCLUSTERED (IdPuntaje)
)
go



IF OBJECT_ID('Puntaje') IS NOT NULL
    PRINT '<<< CREATED TABLE Puntaje >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Puntaje >>>'
go

/* 
 * TABLE: Quizz_Creado 
 */

CREATE TABLE Quizz_Creado(
    IdQuizz         int             IDENTITY(1,1),
    Quizz           varchar(100)    NULL,
    Descripcion     varchar(200)    NULL,
    Portada         varchar(200)    NULL,
    Verificado      bit             NULL,
    IdCategoria     int             NOT NULL,
    IdDificultad    int             NOT NULL,
    CONSTRAINT PK12 PRIMARY KEY NONCLUSTERED (IdQuizz)
)
go



IF OBJECT_ID('Quizz_Creado') IS NOT NULL
    PRINT '<<< CREATED TABLE Quizz_Creado >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Quizz_Creado >>>'
go

/* 
 * TABLE: Quizz_Jugado 
 */

CREATE TABLE Quizz_Jugado(
    IdQuizz_Jugado    int        IDENTITY(1,1),
    Tiempo            time(7)    NULL,
    IdPuntaje         int        NOT NULL,
    IdQuizz           int        NOT NULL,
    IdUsuario         int        NOT NULL,
    CONSTRAINT PK17 PRIMARY KEY NONCLUSTERED (IdQuizz_Jugado)
)
go



IF OBJECT_ID('Quizz_Jugado') IS NOT NULL
    PRINT '<<< CREATED TABLE Quizz_Jugado >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Quizz_Jugado >>>'
go

/* 
 * TABLE: TipoIncisio 
 */

CREATE TABLE TipoIncisio(
    IdTipoInciso    int            IDENTITY(1,1),
    TipoInciso      varchar(30)    NOT NULL,
    CONSTRAINT PK22 PRIMARY KEY NONCLUSTERED (IdTipoInciso)
)
go



IF OBJECT_ID('TipoIncisio') IS NOT NULL
    PRINT '<<< CREATED TABLE TipoIncisio >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE TipoIncisio >>>'
go

/* 
 * TABLE: Usuario 
 */

CREATE TABLE Usuario(
    IdUsuario    int            IDENTITY(1,1),
    Usuario      varchar(30)    NOT NULL,
    Email        varchar(40)    NOT NULL,
    Password     varchar(40)    NOT NULL,
    CONSTRAINT PK13 PRIMARY KEY NONCLUSTERED (IdUsuario)
)
go



IF OBJECT_ID('Usuario') IS NOT NULL
    PRINT '<<< CREATED TABLE Usuario >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE Usuario >>>'
go

/* 
 * TABLE: Autor 
 */

ALTER TABLE Autor ADD CONSTRAINT RefUsuario25 
    FOREIGN KEY (IdUsuario)
    REFERENCES Usuario(IdUsuario)
go

ALTER TABLE Autor ADD CONSTRAINT RefQuizz_Creado36 
    FOREIGN KEY (IdQuizz)
    REFERENCES Quizz_Creado(IdQuizz)
go


/* 
 * TABLE: Correctas 
 */

ALTER TABLE Correctas ADD CONSTRAINT RefInciso37 
    FOREIGN KEY (IdInciso)
    REFERENCES Inciso(IdInciso)
go


/* 
 * TABLE: Inciso 
 */

ALTER TABLE Inciso ADD CONSTRAINT RefTipoIncisio34 
    FOREIGN KEY (IdTipoInciso)
    REFERENCES TipoIncisio(IdTipoInciso)
go

ALTER TABLE Inciso ADD CONSTRAINT RefQuizz_Creado35 
    FOREIGN KEY (IdQuizz)
    REFERENCES Quizz_Creado(IdQuizz)
go


/* 
 * TABLE: Incorrectas 
 */

ALTER TABLE Incorrectas ADD CONSTRAINT RefInciso38 
    FOREIGN KEY (IdInciso)
    REFERENCES Inciso(IdInciso)
go


/* 
 * TABLE: Quizz_Creado 
 */

ALTER TABLE Quizz_Creado ADD CONSTRAINT RefCategoria27 
    FOREIGN KEY (IdCategoria)
    REFERENCES Categoria(IdCategoria)
go

ALTER TABLE Quizz_Creado ADD CONSTRAINT RefDificultad28 
    FOREIGN KEY (IdDificultad)
    REFERENCES Dificultad(IdDificultad)
go


/* 
 * TABLE: Quizz_Jugado 
 */

ALTER TABLE Quizz_Jugado ADD CONSTRAINT RefPuntaje29 
    FOREIGN KEY (IdPuntaje)
    REFERENCES Puntaje(IdPuntaje)
go

ALTER TABLE Quizz_Jugado ADD CONSTRAINT RefQuizz_Creado30 
    FOREIGN KEY (IdQuizz)
    REFERENCES Quizz_Creado(IdQuizz)
go

ALTER TABLE Quizz_Jugado ADD CONSTRAINT RefUsuario31 
    FOREIGN KEY (IdUsuario)
    REFERENCES Usuario(IdUsuario)
go
